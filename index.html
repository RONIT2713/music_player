<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <title>Integrated Music Player</title>

  <!-- ================= PWA ================= -->
  <link rel="manifest" href="manifest.json">

  <meta name="theme-color" content="#0f172a">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="icon" href="icons/icon-192.png">

  <!-- Font Awesome -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
  />

  <link rel="stylesheet" href="music_player.css">
</head>

<body data-theme="dark">

<!-- Mobile toggle -->
<button
  id="mobile-menu-toggle"
  class="fas fa-bars"
  aria-label="Toggle menu">
</button>

<div id="player-container">
  <div class="player-card">

    <!-- ================= SIDEBAR ================= -->
    <aside id="sidebar">
      <h2>viridxi</h2>

      <nav id="main-nav">
        <button data-view="playlist"><i class="fas fa-list"></i> All Songs</button>
        <button data-view="favorites"><i class="fas fa-heart"></i> Favorites</button>
      </nav>

      <h3>Categories</h3>
      <div id="categories-list">
        <button data-category="Hindi"><i class="fas fa-music"></i> Hindi</button>
        <button data-category="English"><i class="fas fa-globe"></i> English</button>
        <button data-category="Punjabi"><i class="fas fa-drum"></i> Punjabi</button>
      </div>

      <button id="view-all-categories-btn" class="view-all-btn">
        <i class="fas fa-layer-group"></i> View all categories
      </button>

      <h3>Artists</h3>
      <ul id="artists-list"></ul>

      <!-- ================= SETTINGS ================= -->
      <h3>Settings</h3>

      <div id="settings-list">

        <button id="theme-toggle" class="settings-btn">
          <i class="fas fa-moon"></i>
          <span>Toggle Theme</span>
        </button>

        <button id="install-app-btn" class="settings-btn">
          <i class="fas fa-download"></i>
          <span>Install App</span>
        </button>

      </div>

    </aside>

    <!-- ================= FIXED HEADER ================= -->
    <header id="top-header">
      <div id="main-header-row">

        <div id="title-and-actions">
          <h2 id="current-view-title">All Songs</h2>
          <button id="clear-favorites-btn" title="Clear favorites">
            <i class="fas fa-trash"></i>
          </button>
        </div>

        <div id="content-view-toggle">
          <button class="main-view-btn active-main-view" data-main-view="songs">Songs</button>
          <button class="main-view-btn" data-main-view="albums">Albums</button>
          <button class="main-view-btn" data-main-view="artists">Artists</button>
        </div>

        <div class="header-search">
          <input
            id="search-bar"
            type="text"
            placeholder="Search songs or artists"
            autocomplete="off"
          />
        </div>

        <button id="search-toggle-btn" aria-label="Search">
          <i class="fas fa-search"></i>
        </button>

      </div>
    </header>

    <!-- ================= MAIN CONTENT ================= -->
    <main id="main-content">

      <!-- Queue -->
      <section id="now-playing-panel">
        <div id="now-playing-header">
          <h3>Now Playing Queue</h3>
          <span>Songs added as play next</span>
        </div>
        <ul id="now-playing-list"></ul>
      </section>

      <!-- Song list -->
      <ul id="song-list"></ul>

    </main>

  </div>
</div>

<!-- ================= BOTTOM PLAYER ================= -->
<div id="bottom-player-container">
  <footer id="music-player">

    <div id="progress-area">
      <span id="current-time">0:00</span>
      <input type="range" id="progress-bar" min="0" max="100" value="0"/>
      <span id="duration">0:00</span>
    </div>

    <div id="controls-and-volume">

      <div id="volume-control">
        <i id="volume-icon" class="fas fa-volume-up"></i>
        <input type="range" id="volume-bar" min="0" max="100" value="100"/>
      </div>

      <div id="controls">
        <button id="shuffle-btn"></button>
        <button id="prev-btn"></button>
        <button id="play-pause-btn"></button>
        <button id="next-btn"></button>
        <button id="repeat-btn"></button>
      </div>

      <div id="current-song-info">
        <img id="mini-cover" class="hidden" src="covers/default.jpg"/>
        <div id="current-song-text">
          <span id="player-title">No Song Selected</span>
          <span id="player-artist"></span>
        </div>
      </div>

    </div>

    <audio id="audio-element" preload="metadata"></audio>
  </footer>
</div>

<button id="open-player-icon" class="fas fa-compact-disc"></button>

<!-- ================= UI PORTAL ================= -->
<div id="ui-portal">
  <!-- modals remain unchanged -->
</div>

<script src="data.js"></script>
<script src="music_player.js"></script>

<!-- ================= SERVICE WORKER ================= -->
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/app/service-worker.js')
      .then(() => console.log("✅ SW registered"))
      .catch(err => console.error("❌ SW error", err));
  });
}
</script>



</body>
</html>
